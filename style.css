:root{
  /* --- Light Mode (Default) --- */
  --bg: #f5f8ff;          /* Very light blue-gray background */
  --card:#ffffff;         /* Pure white cards */
  --muted:#4b5563;        /* Darker text for readability */
  --accent:#007bff;        /* Strong Primary Blue */
  --accent-light: #52a8ff; 
  --success: #10b981;     /* Bright Green (Success/Normal) */
  --warning: #ffb700;     /* Vivid Yellow (Pause/Minor Delay) */
  --danger: #ff007f;      /* Hot Pink/Magenta (Urgent/Major Delay) */
  --glass: rgba(255,255,255,0.7);
  --shadow: 0 10px 30px rgba(0,0,0,0.1);
  --radius:12px;
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color-scheme: light;
}

/* Dark theme variables are toggled by body.dark */
body.dark{
  /* --- Dark Mode (Vibrant/Neon) --- */
  --bg: #0d1117;          /* GitHub-like dark background */
  --card: #161b22;         /* Slightly lighter card background */
  --muted: #9ca3af;        /* Light gray text */
  --accent: #58a6ff;       /* Vibrant Blue (Primary Highlight) */
  --accent-light: #79c0ff;
  --success: #39ff14;     /* Neon Green */
  --warning: #ffff00;     /* Neon Yellow */
  --danger: #ff073a;      /* Bright Red/Pink (High contrast) */
  --glass: rgba(255,255,255,0.08);
  --shadow: 0 10px 40px rgba(0,0,0,0.4);
  color-scheme: dark;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  /* Use a subtle gradient that works in both light and dark */
  background: linear-gradient(135deg, var(--bg), #1a2330 80%); 
  font-size:14px;
  color:var(--muted);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

#app{max-width:1200px;margin:18px auto;padding:18px}
.topbar{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:14px;
}
.brand{font-weight:700;color:var(--accent); font-size: 16px;}

/* --- Global Button & Interactivity Styles --- */
.controls button, button, .whead .collapse {
  margin-left:8px;
  background:var(--card);
  border:1px solid var(--muted); /* Border uses muted color for definition */
  padding:6px 12px;
  border-radius:8px;
  cursor:pointer;
  color:var(--muted);
  font-weight: 500;
  transition: all 0.2s ease-in-out;
}
.whead .collapse {
    border: none;
    background: transparent;
    padding: 6px;
    margin-left: 0;
}
.controls button:hover, button:not(#stopwatch-start):hover, .whead .collapse:hover {
    color: var(--accent);
    background: var(--bg);
    transform: translateY(-2px); /* Stronger lift effect */
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    border-color: var(--accent);
}
button:active {
    transform: translateY(0); /* Press effect */
}
/* Enhanced Focus States for Accessibility */
button:focus-visible, input:focus-visible, textarea:focus-visible, select:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 1px;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px var(--accent-light);
}

/* Active filter buttons */
#widget-todo .todo-footer button.active {
    background: var(--accent);
    color: white;
    border-color: var(--accent);
}
#widget-todo .todo-footer button.active:hover {
    background: var(--accent-light);
    border-color: var(--accent-light);
}

.grid{
  display:grid;
  grid-template-columns: repeat(12,1fr);
  grid-auto-rows: minmax(120px, auto);
  gap:16px;
}

/* widgets sizing */
.widget{
    background:var(--card);
    box-shadow:var(--shadow);
    border-radius:var(--radius);
    overflow:hidden;
    display:flex;
    flex-direction:column;
    border: 1px solid rgba(255, 255, 255, 0.05); /* subtle border for dark mode */
    transition: box-shadow 0.3s ease-in-out, transform 0.3s ease-in-out;
}
.widget:hover {
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
}
.widget .whead{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid rgba(255, 255, 255, 0.08)}
.widget .whead h3{margin:0;font-size:14px;color:var(--muted);font-weight:600}
.widget .whead .collapse{cursor:pointer;color:var(--muted)}
.widget .wbody{padding:12px}

/* Layout positions (No change) */
#widget-clock{grid-column:1/4}
#widget-weather{grid-column:1/4;grid-row:2}
#widget-transit{grid-column:1/4;grid-row:3}

#widget-todo{grid-column:4/9;grid-row:span 2}
#widget-calendar{grid-column:4/9;grid-row:3}

#widget-notes{grid-column:9/13;grid-row:1/2}
#widget-stopwatch{grid-column:9/13;grid-row:2}
#widget-news{grid-column:9/13;grid-row:3}

/* large card */
.widget.large{min-height:320px}

/* Clock */
.clock-large{font-size:36px;font-weight:700;color:var(--accent)}
#clock-zone{font-size:12px;margin-top:6px;color:var(--muted)}

/* To-do */
.todo-form{display:flex;gap:8px;margin-bottom:10px}
.todo-form input, .todo-form select {
    flex:1;padding:10px;border-radius:8px;
    border:1px solid var(--muted);
    background: var(--bg);
    outline:none;
    color: inherit; /* Inherit color for input text */
}
.todo-form select{flex: unset; width: 100px;}
.todo-list{list-style:none;margin:0;padding:0;max-height:300px;overflow:auto}
.todo-list li{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:6px;margin-bottom:8px;background:var(--bg)}
.todo-list li .left{display:flex;gap:8px;align-items:center}
.todo-list .tag{padding:3px 8px;border-radius:999px;background:rgba(255, 255, 255, 0.15);font-size:12px; color: var(--accent);}
.todo-list button{background:transparent;border:0;cursor:pointer;color:var(--muted);margin-left:8px;padding:4px 8px; transition: color 0.2s;}
.todo-list button:hover { color: var(--danger); background: transparent; transform: none; box-shadow: none; }

/* Calendar */
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-top:10px}
.calendar-grid .day{padding:10px;border-radius:6px;text-align:center;background:var(--bg);cursor:pointer; transition: all 0.2s;}
.calendar-grid .day:hover { background: var(--accent); color: white; transform: translateY(-1px); }
.calendar-grid .day.other{opacity:0.45; cursor: default; background: transparent;}
.calendar-grid .day.has-event{box-shadow:inset 0 -3px 0 var(--danger);color:var(--danger);font-weight:600}
.cal-month{text-align:center;font-weight:600}
#calendar-controls{display:flex;align-items:center;justify-content:space-between}

/* Notes */
.note-form input,.note-form textarea{width:100%;padding:8px;border-radius:8px;border:1px solid var(--muted);margin-bottom:6px; background: var(--bg); color: inherit;}
.note-actions{display:flex;justify-content:flex-end}
.notes-list{list-style:none;padding:0;margin:0;max-height:240px;overflow:auto}
.notes-list li{padding:10px;border-radius:8px;margin-bottom:8px;background:var(--bg)}

/* Stopwatch specific styling - 'CSS on Fire' effect for start button */
.stopwatch-display {
  text-align: center;
}
#stopwatch-start {
    position: relative;
    padding: 10px 20px;
    font-weight: 700;
    color: white;
    background: var(--success);
    border: none;
    overflow: hidden;
    /* Add a glow shadow */
    box-shadow: 0 0 10px var(--success), 0 0 20px var(--success);
}
#stopwatch-start:hover {
    background: var(--success); 
    box-shadow: 0 0 15px var(--success), 0 0 30px var(--success); /* Intensify glow */
    transform: translateY(-3px);
}
/* Pause State: Change to Danger (Hot Pink/Red) */
#stopwatch-start.active {
    background: var(--danger); 
    box-shadow: 0 0 10px var(--danger), 0 0 20px var(--danger); 
}
#stopwatch-start.active:hover {
    background: var(--danger); 
    box-shadow: 0 0 15px var(--danger), 0 0 30px var(--danger);
}

/* Other stopwatch buttons */
#stopwatch-lap, #stopwatch-reset {
    color: var(--accent);
    background: var(--card);
}
#stopwatch-lap:disabled, #stopwatch-reset:disabled {
    opacity: 0.5;
    cursor: default;
    box-shadow: none;
    transform: none;
}

/* News */
.inbox-list{list-style:none;padding:0;margin:0;max-height:320px;overflow:auto}
.inbox-list li{padding:10px;border-bottom:1px solid rgba(255, 255, 255, 0.08);display:flex;gap:8px;align-items:flex-start; flex-direction: column; transition: background 0.2s;}
.inbox-list li:hover { background: var(--bg); }
.inbox-list li a { text-decoration: none; color: inherit; width: 100%; cursor: pointer;}
#news-category { padding: 8px; border-radius: 8px; border: 1px solid var(--muted); background: var(--bg); color: inherit;}
#news-refresh { padding: 8px 12px; }

/* footer */
.footer{margin-top:16px;padding:12px;text-align:center;color:var(--muted);font-size:13px}

/* small screens (No change) */
@media (max-width:900px){
  .grid{grid-template-columns:repeat(6,1fr)}
  #widget-clock{grid-column:1/4}
  #widget-weather{grid-column:4/7}
  #widget-transit{grid-column:1/4}
  #widget-todo{grid-column:1/7}
  #widget-calendar{grid-column:1/7}
  #widget-notes{grid-column:1/7}
  #widget-stopwatch{grid-column:1/7}
  #widget-news{grid-column:1/7}
}
@media (max-width:560px){
  .grid{grid-template-columns:repeat(1,1fr)}

}
